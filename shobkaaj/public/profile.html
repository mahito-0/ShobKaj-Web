<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Profile - ShobKaaj</title>
  <link rel="stylesheet" href="/css/base.css">
  <link rel="stylesheet" href="/css/utilities.css">
  <link rel="stylesheet" href="/css/interactions.css">
  <link rel="stylesheet" href="/css/toast.css">
  <link rel="stylesheet" href="/css/profile.css">
</head>
<body>
  <nav class="navbar" id="navbar"></nav>
  <main class="container">
    <!-- Loading State -->
    <div id="loading" class="text-center py-8">
      <div class="spinner lg mx-auto mb-4"></div>
      <p class="text-muted">Loading profile...</p>
    </div>
    
    <!-- Profile Content -->
    <div id="profileContent" class="card" style="max-width:720px;margin:32px auto;display:none;">
      <div class="mb-6">
        <h2 class="text-2xl font-bold mb-2" data-i18n="nav.profile">‡¶™‡ßç‡¶∞‡ßã‡¶´‡¶æ‡¶á‡¶≤</h2>
        <p class="text-muted">Update your profile information and settings</p>
      </div>
      
      <div class="flex items-center gap-4 mb-6 p-4 bg-surface rounded-lg">
        <img id="avatarImg" class="avatar lg" src="/img/avatar.png" alt="avatar" onerror="this.src='/img/avatar.png'"/>
        <div class="flex-1">
          <label for="avatarInput" class="btn outline cursor-pointer">
            <span>üì∑</span>
            <span>Change Picture</span>
          </label>
          <input id="avatarInput" type="file" accept="image/png,image/jpeg,image/webp" class="hidden"/>
          <div class="text-xs text-muted mt-2">Max 2MB, PNG/JPG/WebP</div>
        </div>
      </div>
      <form id="profileForm" class="form-stack">
        <div class="form-row">
          <div class="form-group">
            <label class="font-medium">‡¶®‡¶æ‡¶Æ *</label>
            <input class="input" name="name" required placeholder="Enter your full name"/>
          </div>
          <div class="form-group">
            <label class="font-medium">‡¶´‡ßã‡¶®</label>
            <input class="input" name="phone" placeholder="+8801XXXXXXXXX"/>
          </div>
        </div>
        
        <div class="form-row">
          <div class="form-group">
            <label class="font-medium">NID</label>
            <input class="input" name="nid" placeholder="National ID Number"/>
          </div>
          <div class="form-group">
            <label class="font-medium">‡¶∏‡ßç‡¶ï‡¶ø‡¶≤‡¶∏</label>
            <input class="input" name="skills" placeholder="plumbing, tuition, delivery"/>
          </div>
        </div>
        
        <div class="form-group">
          <label class="font-medium">‡¶¨‡¶æ‡¶Ø‡¶º‡ßã</label>
          <textarea class="input" name="bio" rows="4" placeholder="Tell others about yourself..."></textarea>
        </div>

        <div class="form-group">
          <label class="font-medium">‡¶≤‡ßã‡¶ï‡ßá‡¶∂‡¶®</label>
          <div class="flex items-center gap-3">
            <button type="button" id="locBtn" class="btn outline" data-i18n="common.useMyLocation">
              <span>üìè</span>
              <span>Use my location</span>
            </button>
            <span id="locLabel" class="badge">N/A</span>
          </div>
        </div>

        <!-- Error Display -->
        <div id="errorContainer" class="hidden">
          <div class="p-4 bg-error-subtle border border-error rounded-lg">
            <div class="flex items-center gap-2 text-error">
              <span>‚ö†Ô∏è</span>
              <span id="errorMessage"></span>
            </div>
          </div>
        </div>

        <!-- Success Message -->
        <div id="successContainer" class="hidden">
          <div class="p-4 bg-success-subtle border border-success rounded-lg">
            <div class="flex items-center gap-2 text-success">
              <span>‚úì</span>
              <span id="successMessage">Profile updated successfully!</span>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button class="btn" type="submit" id="saveBtn" data-i18n="common.save">
            <span>Save Changes</span>
          </button>
          <a class="btn outline" href="/dashboard.html" data-i18n="common.back">Back</a>
        </div>
      </form>
    </div>
    
    <!-- Access Denied -->
    <div id="accessDenied" class="text-center py-8" style="display:none;">
      <div class="text-6xl mb-4">üö´</div>
      <h2 class="text-xl font-bold mb-2">Access Denied</h2>
      <p class="text-muted mb-4">You need to be logged in to access your profile.</p>
      <a href="/login.html" class="btn">Login</a>
    </div>
    </div>
  </main>

  <script src="/js/api.js"></script>
  <script src="/js/mock-auth.js"></script>
  <script src="/js/i18n.js"></script>
  <script src="/js/auth.js"></script>
  <script src="/js/main.js"></script>
  <script src="/js/profile.js"></script>
</body>
</html>